#!/usr/bin/env bash
#
# Initializes the repository by cloning PySide, Shiboken, and PySide-Tools.  Git submodules
# don't work well here because we frequently make changes to these other packages and want
# to get the latest changes.
#

echo "Cleaning build residue..."
git clean -fd -e pyside -e shiboken

echo "Checking PySide..."
if [ ! -d pyside -o ! -d pyside/.git ]; then
    rm -fr PySide >& /dev/null
    git clone git@github.com:enthought/PySide pyside
    (cd pyside; git checkout pyside-1.1.1-enthought)
else
    (cd pyside; git pull origin master; git clean -f; git checkout pyside-1.1.1-enthought)
fi

echo "Checking Shiboken..."
if [ ! -d shiboken -o ! -d shiboken/.git ]; then
    rm -fr shiboken >& /dev/null
    git clone git@github.com:enthought/Shiboken shiboken
    (cd shiboke; git checkout pyside-1.1.1-enthought)
else
    (cd shiboken; git pull origin master; git clean -f; git checkout pyside-1.1.1-enthought)
fi

echo "Checking PySide-Tools..."
if [ ! -d pyside-tools -o ! -d pyside-tools/.git ]; then
    rm -fr pyside-tools >& /dev/null
    git clone git@github.com:enthought/PySide-Tools pyside-tools
else
    (cd pyside-tools; git pull origin master; git clean -f)
fi

